import{r as R,B as b,A as N,T as $}from"./CkaUaW7f.js";import{d as x,r as L,w as l}from"./Bn3tUsvk.js";function Z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function q(e,t){N(e,1,1,()=>{t.delete(e.key)})}function J(e,t,s,i,n,a,o,u,c,w,g,p){let h=e.length,y=a.length,d=h;const _={};for(;d--;)_[e[d].key]=d;const S=[],D=new Map,I=new Map,M=[];for(d=y;d--;){const r=p(n,a,d),f=s(r);let m=o.get(f);m?M.push(()=>m.p(r,t)):(m=w(f,r),m.c()),D.set(f,S[d]=m),f in _&&I.set(f,Math.abs(d-_[f]))}const k=new Set,C=new Set;function A(r){b(r,1),r.m(u,g),o.set(r.key,r),g=r.first,y--}for(;h&&y;){const r=S[y-1],f=e[h-1],m=r.key,T=f.key;r===f?(g=r.first,h--,y--):D.has(T)?!o.has(m)||k.has(m)?A(r):C.has(T)?h--:I.get(m)>I.get(T)?(C.add(m),A(r)):(k.add(T),h--):(c(f,o),h--)}for(;h--;){const r=e[h];D.has(r.key)||c(r,o)}for(;y;)A(S[y-1]);return R(M),S}function O(e,t){if(!e||!t)return 0;const s=e.length>t.length?e:t,i=e.length>t.length?t:e;if(s.length===0)return 1;const n=G(s.toLowerCase(),i.toLowerCase());return(s.length-n)/s.length}function G(e,t){const s=[];for(let i=0;i<=t.length;i++)s[i]=[i];for(let i=0;i<=e.length;i++)s[0][i]=i;for(let i=1;i<=t.length;i++)for(let n=1;n<=e.length;n++)t.charAt(i-1)===e.charAt(n-1)?s[i][n]=s[i-1][n-1]:s[i][n]=Math.min(s[i-1][n-1]+1,s[i][n-1]+1,s[i-1][n]+1);return s[t.length][e.length]}function K(e,t){if(!Array.isArray(e)||!Array.isArray(t))return{ids:[],report:{total:0,migrated:0,failed:[],suggestions:[]}};const s=[],i={total:e.length,migrated:0,failed:[],suggestions:[]};for(const n of e){if(typeof n=="number"){s.push(n),i.migrated++;continue}if(!n||typeof n!="object")continue;let a=null,o="";if(n.name&&(a=t.find(u=>u.name===n.name),a&&(o="exact_name")),!a&&n.url&&(a=t.find(u=>u.url===n.url),a&&(o="exact_url")),!a&&n.name){let c=null,w=0;for(const g of t){if(!g.name)continue;const p=O(n.name,g.name);p>w&&p>=.65&&(w=p,c=g)}c&&(a=c,o=`fuzzy_name (${Math.round(w*100)}% similar)`)}if(!a&&n.url){const u=v(n.url);u&&(a=t.find(c=>c.url?v(c.url)===u:!1),a&&(o="domain_match"))}if(a&&a.id)s.push(a.id),i.migrated++,console.log(`✅ Migrated "${n.name}" → "${a.name}" (ID: ${a.id}) [${o}]`);else{const u={name:n.name||"Unknown",url:n.url||"Unknown",reason:"No suitable match found"};if(i.failed.push(u),n.name){const c=j(n.name,t,3);c.length>0&&i.suggestions.push({original:n.name,suggestions:c})}console.warn(`❌ Could not migrate "${n.name||n.url}"`)}}return{ids:s,report:i}}function v(e){try{return new URL(e).hostname.replace("www.","")}catch{return null}}function j(e,t,s=3){return t.filter(n=>n.name).map(n=>({name:n.name,similarity:O(e,n.name)})).filter(n=>n.similarity>.5).sort((n,a)=>a.similarity-n.similarity).slice(0,s).map(n=>n.name)}function H(e,t){return!Array.isArray(e)||!Array.isArray(t)?[]:e.map(s=>t.find(i=>i.id===s)).filter(Boolean)}function X(e){return!Array.isArray(e)||e.length===0?!1:e.some(t=>typeof t=="object"&&t!==null)}let ee=l([]),te=l([]),U=l([]),F=l([]),ne=l([]),ie=l(""),se=l({}),ae=l([]),re=l(!1),P=l([]),oe=x([P,U],([e,t])=>H(e,t)),le=l(""),ce=l(""),ue=l({}),fe=L(["Card/Board Games","Colors","Estimation","Food","Geography","History","Math/Logic","Movies/TV","Music","Science/Nature","Shapes/Patterns","Sports","Trivia","Vehicles","Video Games","Miscellaneous","Words"]),me=L({"Card/Board Games":"hsl(0, 90%, 50%, 45%)",Colors:"hsl(24, 90%, 50%, 45%)",Estimation:"hsl(48, 90%, 50%, 45%)",Food:"hsl(72, 90%, 50%, 45%)",Geography:"hsl(96, 90%, 50%, 45%)",History:"hsl(108, 90%, 50%, 45%)","Math/Logic":"hsl(120, 90%, 50%, 45%)","Movies/TV":"hsl(144, 90%, 50%, 45%)",Music:"hsl(168, 90%, 50%, 45%)","Science/Nature":"hsl(192, 90%, 50%, 45%)","Shapes/Patterns":"hsl(216, 90%, 50%, 45%)",Sponsors:"hsl(226, 90%, 50%, 45%)",Sports:"hsl(240, 90%, 50%, 45%)",Trivia:"hsl(264, 90%, 50%, 45%)",Vehicles:"hsl(288, 90%, 50%, 45%)","Video Games":"hsl(312, 90%, 50%, 45%)",Words:"hsl(336, 90%, 50%, 45%)",Miscellaneous:"hsl(0, 0%, 49%, 45%)"});const E={DEDICATED_SECTION:"dles-of-the-week",REGULAR_SECTION:"regular-section-dle-of-week"};function he(e,t,s,i,n=null){const a={game_name:e.name,game_category:e.category,game_id:e.id,click_type:t,view_type:s,section:i},o=V(e,i,n);return o&&(a.position_id=o),a}function V(e,t,s){if(s!==null&&t==="dles-of-the-week")return`${E.DEDICATED_SECTION}-${s+1}`;if(t==="regular"){const i=W(e);if(i!==-1)return`${E.REGULAR_SECTION}-${i+1}`}return null}function W(e){return $(F).findIndex(s=>s.id===e.id)}function B(e,t,s=""){typeof window<"u"&&window.umami&&window.umami.track(e,t)}function de(){let e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function z(e,t=null){t&&B("game-click",t),Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:e}).click()}function ge(e){if(e.length!=0){const t=e[Math.floor(Math.random()*e.length)],s={dle_name:t.name,dle_url:t.url,dle_category:t.category,dle_id:t.id,click_type:"random-button",source:"random-button",section:"random",available_options:e.length};z(t.url,s)}}function ye(e){const t=new Date,s=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"}));for(const i of e)if(new Date(i.date)<s)return i;return e[e.length-1]}function we(e,t,s=!1){if(!t.trim())return e;const i=t.toLowerCase().trim().split(/\s+/);return e.filter(n=>{const a=[n.name,...s?[n.description]:[]].join(" ").toLowerCase();return i.every(o=>a.includes(o))})}export{K as A,ye as B,oe as a,me as b,ne as c,ee as d,Z as e,P as f,we as g,U as h,re as i,he as j,de as k,le as l,z as m,te as n,q as o,ge as p,fe as q,ue as r,ce as s,B as t,J as u,F as v,se as w,ae as x,ie as y,X as z};
