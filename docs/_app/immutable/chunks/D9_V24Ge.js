import{r as R,B as j,A as x}from"./CkaUaW7f.js";import{d as G,r as b,w as l}from"./Bn3tUsvk.js";function B(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function O(e,n){x(e,1,1,()=>{n.delete(e.key)})}function Y(e,n,i,s,t,a,o,m,c,w,g,p){let h=e.length,y=a.length,d=h;const A={};for(;d--;)A[e[d].key]=d;const S=[],T=new Map,v=new Map,I=[];for(d=y;d--;){const r=p(t,a,d),u=i(r);let f=o.get(u);f?I.push(()=>f.p(r,n)):(f=w(u,r),f.c()),T.set(u,S[d]=f),u in A&&v.set(u,Math.abs(d-A[u]))}const _=new Set,L=new Set;function D(r){j(r,1),r.m(m,g),o.set(r.key,r),g=r.first,y--}for(;h&&y;){const r=S[y-1],u=e[h-1],f=r.key,M=u.key;r===u?(g=r.first,h--,y--):T.has(M)?!o.has(f)||_.has(f)?D(r):L.has(M)?h--:v.get(f)>v.get(M)?(L.add(f),D(r)):(_.add(M),h--):(c(u,o),h--)}for(;h--;){const r=e[h];T.has(r.key)||c(r,o)}for(;y;)D(S[y-1]);return R(I),S}function k(e,n){if(!e||!n)return 0;const i=e.length>n.length?e:n,s=e.length>n.length?n:e;if(i.length===0)return 1;const t=H(i.toLowerCase(),s.toLowerCase());return(i.length-t)/i.length}function H(e,n){const i=[];for(let s=0;s<=n.length;s++)i[s]=[s];for(let s=0;s<=e.length;s++)i[0][s]=s;for(let s=1;s<=n.length;s++)for(let t=1;t<=e.length;t++)n.charAt(s-1)===e.charAt(t-1)?i[s][t]=i[s-1][t-1]:i[s][t]=Math.min(i[s-1][t-1]+1,i[s][t-1]+1,i[s-1][t]+1);return i[n.length][e.length]}function P(e,n){if(!Array.isArray(e)||!Array.isArray(n))return{ids:[],report:{total:0,migrated:0,failed:[],suggestions:[]}};const i=[],s={total:e.length,migrated:0,failed:[],suggestions:[]};for(const t of e){if(typeof t=="number"){i.push(t),s.migrated++;continue}if(!t||typeof t!="object")continue;let a=null,o="";if(t.name&&(a=n.find(m=>m.name===t.name),a&&(o="exact_name")),!a&&t.url&&(a=n.find(m=>m.url===t.url),a&&(o="exact_url")),!a&&t.name){let c=null,w=0;for(const g of n){if(!g.name)continue;const p=k(t.name,g.name);p>w&&p>=.65&&(w=p,c=g)}c&&(a=c,o=`fuzzy_name (${Math.round(w*100)}% similar)`)}if(!a&&t.url){const m=C(t.url);m&&(a=n.find(c=>c.url?C(c.url)===m:!1),a&&(o="domain_match"))}if(a&&a.id)i.push(a.id),s.migrated++,console.log(`✅ Migrated "${t.name}" → "${a.name}" (ID: ${a.id}) [${o}]`);else{const m={name:t.name||"Unknown",url:t.url||"Unknown",reason:"No suitable match found"};if(s.failed.push(m),t.name){const c=V(t.name,n,3);c.length>0&&s.suggestions.push({original:t.name,suggestions:c})}console.warn(`❌ Could not migrate "${t.name||t.url}"`)}}return{ids:i,report:s}}function C(e){try{return new URL(e).hostname.replace("www.","")}catch{return null}}function V(e,n,i=3){return n.filter(t=>t.name).map(t=>({name:t.name,similarity:k(e,t.name)})).filter(t=>t.similarity>.5).sort((t,a)=>a.similarity-t.similarity).slice(0,i).map(t=>t.name)}function $(e,n){return!Array.isArray(e)||!Array.isArray(n)?[]:e.map(i=>n.find(s=>s.id===i)).filter(Boolean)}function W(e){return!Array.isArray(e)||e.length===0?!1:e.some(n=>typeof n=="object"&&n!==null)}let Q=l([]),Z=l([]),E=l([]),q=l([]),J=l([]),K=l(""),X=l({}),ee=l([]),te=l(!1),F=l([]),ne=G([F,E],([e,n])=>$(e,n)),se=l(""),ie=l(""),ae=l({}),re=b(["Card/Board Games","Colors","Estimation","Food","Geography","History","Math/Logic","Movies/TV","Music","Science/Nature","Shapes/Patterns","Sports","Trivia","Vehicles","Video Games","Miscellaneous","Words"]),oe=b({"Card/Board Games":"hsl(0, 90%, 50%, 45%)",Colors:"hsl(24, 90%, 50%, 45%)",Estimation:"hsl(48, 90%, 50%, 45%)",Food:"hsl(72, 90%, 50%, 45%)",Geography:"hsl(96, 90%, 50%, 45%)",History:"hsl(108, 90%, 50%, 45%)","Math/Logic":"hsl(120, 90%, 50%, 45%)","Movies/TV":"hsl(144, 90%, 50%, 45%)",Music:"hsl(168, 90%, 50%, 45%)","Science/Nature":"hsl(192, 90%, 50%, 45%)","Shapes/Patterns":"hsl(216, 90%, 50%, 45%)",Sponsors:"hsl(226, 90%, 50%, 45%)",Sports:"hsl(240, 90%, 50%, 45%)",Trivia:"hsl(264, 90%, 50%, 45%)",Vehicles:"hsl(288, 90%, 50%, 45%)","Video Games":"hsl(312, 90%, 50%, 45%)",Words:"hsl(336, 90%, 50%, 45%)",Miscellaneous:"hsl(0, 0%, 49%, 45%)"});function le(){let e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function N(e,n=null){n&&typeof window<"u"&&window.umami&&window.umami.track("game-click",n),Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:e}).click()}function ce(e){if(e.length!=0){const n=e[Math.floor(Math.random()*e.length)],i={dle_name:n.name,dle_url:n.url,dle_category:n.category,dle_id:n.id,click_type:"random-button",source:"random-button",section:"random",available_options:e.length};N(n.url,i)}}function me(e){const n=new Date,i=new Date(n.toLocaleString("en-US",{timeZone:"America/New_York"}));for(const s of e)if(new Date(s.date)<i)return s;return e[e.length-1]}function ue(e,n,i=!1){if(!n.trim())return e;const s=n.toLowerCase().trim().split(/\s+/);return e.filter(t=>{const a=[t.name,...i?[t.description]:[]].join(" ").toLowerCase();return s.every(o=>a.includes(o))})}export{ne as a,oe as b,J as c,Q as d,B as e,F as f,ue as g,E as h,te as i,q as j,le as k,se as l,N as m,Z as n,O as o,ce as p,re as q,ae as r,ie as s,X as t,Y as u,ee as v,K as w,W as x,P as y,me as z};
