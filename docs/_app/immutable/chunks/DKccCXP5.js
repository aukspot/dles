import{X as Xt,S as qt,i as Jt,s as Qt,n as Ke,d as Xe,a as er,k as tr,b as Ae,u as vt,l as mt,v as pt}from"./DqUeIwOP.js";import{h as rr}from"./x8Ix-Z5-.js";import"./IHki7fMi.js";const ht={DEDICATED_SECTION:"dles-of-the-week",REGULAR_SECTION:"regular-section-dle-of-week"};function _n(e,t,r,n,a=null){const i={dle_name:e.name,dle_id:e.id,click_type:t,section:n},o=nr(e,n,a);return o&&(i.position_id=o),i}function nr(e,t,r){if(r!==null&&t==="dles-of-the-week")return`${ht.DEDICATED_SECTION}-${r+1}`;if(t==="regular"){const n=ir(e);if(n!==-1)return`${ht.REGULAR_SECTION}-${n+1}`}return null}function ir(e){return Xt(rr).findIndex(r=>r.id===e.id)}function ar(e,t,r=""){typeof window<"u"&&window.umami&&window.umami.track(e,t)}function wn(){let e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function or(e,t=null){if(t){const r={dle_name:t.dle_name,dle_id:t.dle_id,click_type:t.click_type,section:t.section||"random"};t.position_id&&t.section&&t.section.includes("dles-of-the-week")&&(r.position_id=t.position_id),ar("game-click",r)}Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:e}).click()}function On(e,t=null){if(e.length!=0){const r=e[Math.floor(Math.random()*e.length)],n=t||{dle_name:r.name,dle_id:r.id,click_type:"random-button",section:"random"};t&&(n.dle_name=r.name,n.dle_id=r.id),or(r.url,n)}}function In(e){const t=new Date,r=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"}));for(const n of e)if(new Date(n.date)<r)return n;return e[e.length-1]}function An(e,t,r=!1,n=!1){if(!t.trim())return e;const a=t.toLowerCase().trim().split(/\s+/);return e.filter(i=>{const o=[i.name,...r?[i.description]:[],...n?[i.url]:[]].join(" ").toLowerCase();return a.every(l=>o.includes(l))})}function sr(e){let t,r;return{c(){t=pt("svg"),r=pt("path"),this.h()},l(n){t=vt(n,"svg",{width:!0,viewBox:!0,stroke:!0});var a=mt(t);r=vt(a,"path",{d:!0}),mt(r).forEach(Xe),a.forEach(Xe),this.h()},h(){Ae(r,"d","M2 9.137C2 14 6.02 16.591 8.962 18.911 10 19.729 11 20.5 12 20.5s2-.77 3.038-1.59C17.981 16.592 22 14 22 9.138c0-4.863-5.5-8.312-10-3.636C7.5.825 2 4.274 2 9.137Z"),Ae(t,"width","28"),Ae(t,"viewBox","0 0 24 24"),Ae(t,"stroke","currentColor")},m(n,a){er(n,t,a),tr(t,r)},p:Ke,i:Ke,o:Ke,d(n){n&&Xe(t)}}}class Sn extends qt{constructor(t){super(),Jt(this,t,null,sr,Qt,{})}}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yt(Object(r),!0).forEach(function(n){re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q(e){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(e)}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dr(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function lr(e,t){if(e==null)return{};var r=dr(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ur(e,t){return fr(e)||vr(e,t)||ot(e,t)||pr()}function P(e){return cr(e)||gr(e)||ot(e)||mr()}function cr(e){if(Array.isArray(e))return Je(e)}function fr(e){if(Array.isArray(e))return e}function gr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vr(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,o,l;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(u){i=!0,l=u}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function ot(e,t){if(e){if(typeof e=="string")return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}}function Je(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ot(e))||t){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,l;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return i=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(o)throw l}}}}var hr="finalize",yr="consider";function ne(e,t,r){e.dispatchEvent(new CustomEvent(hr,{detail:{items:t,info:r}}))}function V(e,t,r){e.dispatchEvent(new CustomEvent(yr,{detail:{items:t,info:r}}))}var ze="draggedEntered",Te="draggedLeft",Ue="draggedOverIndex",st="draggedLeftDocument",Le={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Dr(e,t,r){e.dispatchEvent(new CustomEvent(ze,{detail:{indexObj:t,draggedEl:r}}))}function Er(e,t,r){e.dispatchEvent(new CustomEvent(Te,{detail:{draggedEl:t,type:Le.LEFT_FOR_ANOTHER,theOtherDz:r}}))}function Tr(e,t){e.dispatchEvent(new CustomEvent(Te,{detail:{draggedEl:t,type:Le.OUTSIDE_OF_ANY}}))}function br(e,t,r){e.dispatchEvent(new CustomEvent(Ue,{detail:{indexObj:t,draggedEl:r}}))}function _r(e){window.dispatchEvent(new CustomEvent(st,{detail:{draggedEl:e}}))}var C={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:ze,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Ue,DRAGGED_LEFT:Te,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},x={POINTER:"pointer",KEYBOARD:"keyboard"},$e="isDndShadowItem",Be="data-is-dnd-shadow-item-internal",wr="data-is-dnd-shadow-item-hint",Nt="id:dnd-shadow-placeholder-0000",Or="dnd-action-dragged-el",T="id",Qe=0;function xt(){Qe++}function Lt(){if(Qe===0)throw new Error("Bug! trying to decrement when there are no dropzones");Qe--}var dt=typeof window>"u";function et(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r,n=t?Sr(e):e.getBoundingClientRect(),a=getComputedStyle(e),i=a.transform;if(i){var o,l,u,f;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),o=+r[0],l=+r[5],u=+r[12],f=+r[13];else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),o=+r[0],l=+r[3],u=+r[4],f=+r[5];else return n;var s=a.transformOrigin,g=n.x-u-(1-o)*parseFloat(s),d=n.y-f-(1-l)*parseFloat(s.slice(s.indexOf(" ")+1)),c=o?n.width/o:e.offsetWidth,v=l?n.height/l:e.offsetHeight;return{x:g,y:d,width:c,height:v,top:d,right:g+c,bottom:d+v,left:g}}else return n}function Mt(e){var t=et(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Pt(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function Ft(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Ir(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function We(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function he(e){return Ft(Pt(e))}function Dt(e,t){var r=he(e),n=Mt(t);return We(r,n)}function Et(e,t){var r=he(e),n=he(t);return Ir(r,n)}function Ar(e){var t=Pt(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Sr(e){for(var t=e.getBoundingClientRect(),r={top:t.top,bottom:t.bottom,left:t.left,right:t.right},n=!1,a=!1,i=e.parentElement;i&&i!==document.body;){var o=window.getComputedStyle(i),l=o.overflowY,u=o.overflowX,f=l==="scroll"||l==="auto",s=u==="scroll"||u==="auto";if(f||s){var g=i.getBoundingClientRect();if(f){var d=Math.max(r.top,g.top),c=Math.min(r.bottom,g.bottom);(d!==r.top||c!==r.bottom)&&(n=!0),r.top=d,r.bottom=c}if(s){var v=Math.max(r.left,g.left),m=Math.min(r.right,g.right);(v!==r.left||m!==r.right)&&(a=!0),r.left=v,r.right=m}}i=i.parentElement}return n||a?{top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:Math.max(0,r.right-r.left),height:Math.max(0,r.bottom-r.top)}:{top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:Math.max(0,t.right-t.left),height:Math.max(0,t.bottom-t.top)}}var ee;function lt(){ee=new Map}lt();function Cr(e){var t=Array.from(e.children).findIndex(function(r){return r.getAttribute(Be)});if(t>=0)return ee.has(e)||ee.set(e,new Map),ee.get(e).set(t,Mt(e.children[t])),t}function Rr(e,t){if(!Dt(e,t))return null;var r=t.children;if(r.length===0)return{index:0,isProximityBased:!0};for(var n=Cr(t),a=0;a<r.length;a++)if(Dt(e,r[a])){var i=ee.has(t)&&ee.get(t).get(a);return i&&!We(he(e),i)?{index:n,isProximityBased:!1}:{index:a,isProximityBased:!1}}for(var o=Number.MAX_VALUE,l=void 0,u=0;u<r.length;u++){var f=Et(e,r[u]);f<o&&(o=f,l=u)}if(r.length>0){var s=r.length,g=r[s-1],d=g.cloneNode(!1);d.style.visibility="hidden",d.style.pointerEvents="none",t.appendChild(d);var c=Et(e,d);c<o&&(l=s),t.removeChild(d)}return{index:l,isProximityBased:!0}}function ge(e){return JSON.stringify(e,null,2)}function Me(e){if(!e)throw new Error("cannot get depth of a falsy node");return kt(e,0)}function kt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.parentElement?kt(e.parentElement,t+1):t-1}function Nr(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!{}.hasOwnProperty.call(t,r)||t[r]!==e[r])return!1;return!0}function xr(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Lr=200,Tt=10,tt;function Mr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lr,n=arguments.length>3?arguments[3]:void 0,a,i,o=!1,l,u=Array.from(t).sort(function(s,g){return Me(g)-Me(s)});function f(){var s=he(e),g=n.multiScrollIfNeeded();if(!g&&l&&Math.abs(l.x-s.x)<Tt&&Math.abs(l.y-s.y)<Tt){tt=window.setTimeout(f,r);return}if(Ar(e)){_r(e);return}l=s;var d=!1,c=Ee(u),v;try{for(c.s();!(v=c.n()).done;){var m=v.value;g&&lt();var y=Rr(e,m);if(y!==null){var b=y.index;d=!0,m!==a?(a&&Er(a,e,m),Dr(m,y,e),a=m):b!==i&&(br(m,y,e),i=b);break}}}catch(D){c.e(D)}finally{c.f()}!d&&o&&a?(Tr(a,e),a=void 0,i=void 0,o=!1):o=!0,tt=window.setTimeout(f,r)}f()}function Pr(){clearTimeout(tt),lt()}var ve=30;function Fr(){var e;function t(){e={directionObj:void 0,stepPx:0}}t();function r(i){var o=e,l=o.directionObj,u=o.stepPx;l&&(i.scrollBy(l.x*u,l.y*u),window.requestAnimationFrame(function(){return r(i)}))}function n(i){return ve-i}function a(i,o){if(!o)return!1;var l=kr(i,o),u=!!e.directionObj;if(l===null)return u&&t(),!1;var f=!1,s=!1;return o.scrollHeight>o.clientHeight&&(l.bottom<ve?(f=!0,e.directionObj={x:0,y:1},e.stepPx=n(l.bottom)):l.top<ve&&(f=!0,e.directionObj={x:0,y:-1},e.stepPx=n(l.top)),!u&&f)||o.scrollWidth>o.clientWidth&&(l.right<ve?(s=!0,e.directionObj={x:1,y:0},e.stepPx=n(l.right)):l.left<ve&&(s=!0,e.directionObj={x:-1,y:0},e.stepPx=n(l.left)),!u&&s)?(r(o),!0):(t(),!1)}return{scrollIfNeeded:a,resetScrolling:t}}function kr(e,t){var r=t===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:t.getBoundingClientRect();return We(e,r)?{top:e.y-r.top,bottom:r.bottom-e.y,left:e.x-r.left,right:r.right-e.x}:null}function Gr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Ur(e),n=Array.from(r).sort(function(u,f){return Me(f)-Me(u)}),a=Fr(),i=a.scrollIfNeeded,o=a.resetScrolling;function l(){var u=t();if(!u||!n)return!1;for(var f=n.filter(function(d){return We(u,d.getBoundingClientRect())||d===document.scrollingElement}),s=0;s<f.length;s++){var g=i(u,f[s]);if(g)return!0}return!1}return{multiScrollIfNeeded:r.size>0?l:function(){return!1},destroy:function(){return o()}}}function zr(e){if(!e)return[];for(var t=[],r=e;r;){var n=window.getComputedStyle(r),a=n.overflow;a.split(" ").some(function(i){return i.includes("auto")||i.includes("scroll")})&&t.push(r),r=r.parentElement}return t}function Ur(e){var t=new Set,r=Ee(e),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;zr(a).forEach(function(i){return t.add(i)})}}catch(i){r.e(i)}finally{r.f()}return(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&t.add(document.scrollingElement),t}function $r(e){var t=e.cloneNode(!0),r=[],n=e.tagName==="SELECT",a=n?[e]:P(e.querySelectorAll("select")),i=Ee(a),o;try{for(i.s();!(o=i.n()).done;){var l=o.value;r.push(l.value)}}catch(z){i.e(z)}finally{i.f()}if(a.length>0)for(var u=n?[t]:P(t.querySelectorAll("select")),f=0;f<u.length;f++){var s=u[f],g=r[f],d=s.querySelector('option[value="'.concat(g,'"'));d&&d.setAttribute("selected",!0)}var c=e.tagName==="CANVAS",v=c?[e]:P(e.querySelectorAll("canvas"));if(v.length>0)for(var m=c?[t]:P(t.querySelectorAll("canvas")),y=0;y<m.length;y++){var b=v[y],D=m[y];D.width=b.width,D.height=b.height,b.width>0&&b.height>0&&D.getContext("2d").drawImage(b,0,0)}return t}var ye=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Br=re({},ye.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT,!1);function Gt(e){if(!ye[e])throw new Error("Can't get non existing feature flag ".concat(e,"! Supported flags: ").concat(Object.keys(ye)));return Br[e]}var Wr=.2;function K(e){return"".concat(e," ").concat(Wr,"s ease")}function Zr(e,t){var r=e.getBoundingClientRect(),n=$r(e);zt(e,n),n.id=Or,n.style.position="fixed";var a=r.top,i=r.left;if(n.style.top="".concat(a,"px"),n.style.left="".concat(i,"px"),t){var o=Ft(r);a-=o.y-t.y,i-=o.x-t.x,window.setTimeout(function(){n.style.top="".concat(a,"px"),n.style.left="".concat(i,"px")},0)}return n.style.margin="0",n.style.boxSizing="border-box",n.style.height="".concat(r.height,"px"),n.style.width="".concat(r.width,"px"),n.style.transition="".concat(K("top"),", ").concat(K("left"),", ").concat(K("background-color"),", ").concat(K("opacity"),", ").concat(K("color")," "),window.setTimeout(function(){return n.style.transition+=", ".concat(K("width"),", ").concat(K("height"))},0),n.style.zIndex="9999",n.style.cursor="grabbing",n}function Hr(e){e.style.cursor="grab"}function jr(e,t,r,n){zt(t,e);var a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=a.width-i.width,l=a.height-i.height;if(o||l){var u={left:(r-i.left)/i.width,top:(n-i.top)/i.height};Gt(ye.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height="".concat(a.height,"px"),e.style.width="".concat(a.width,"px")),e.style.left="".concat(parseFloat(e.style.left)-u.left*o,"px"),e.style.top="".concat(parseFloat(e.style.top)-u.top*l,"px")}}function zt(e,t){var r=window.getComputedStyle(e);Array.from(r).filter(function(n){return n.startsWith("background")||n.startsWith("padding")||n.startsWith("font")||n.startsWith("text")||n.startsWith("align")||n.startsWith("justify")||n.startsWith("display")||n.startsWith("flex")||n.startsWith("border")||n==="opacity"||n==="color"||n==="list-style-type"||Gt(ye.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(n==="width"||n==="height")}).forEach(function(n){return t.style.setProperty(n,r.getPropertyValue(n),r.getPropertyPriority(n))})}function Yr(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function Ut(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function Vr(e){e.style.visibility="hidden",e.setAttribute(Be,"true")}function Kr(e){e.style.visibility="",e.removeAttribute(Be)}function Re(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(n){var a=t(n);Object.keys(a).forEach(function(i){n.style[i]=a[i]}),r(n).forEach(function(i){return n.classList.add(i)})})}function Pe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return[]};e.forEach(function(n){var a=t(n);Object.keys(a).forEach(function(i){n.style[i]=""}),r(n).forEach(function(i){return n.classList.contains(i)&&n.classList.remove(i)})})}function Xr(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var r=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=r}}var qr="--any--",Jr=100,Qr=20,Se=3,en=80,bt={outline:"rgba(255, 255, 102, 0.7) solid 2px"},_t="data-is-dnd-original-dragged-item",R,_,N,Ze,p,He,Y,O,$,A,H=!1,ut=!1,ct,be=!1,Ne=[],pe,B,me=!1,G=new Map,h=new Map,qe=new WeakMap;function tn(e,t){G.has(t)||G.set(t,new Set),G.get(t).has(e)||(G.get(t).add(e),xt())}function wt(e,t){G.get(t).delete(e),Lt(),G.get(t).size===0&&G.delete(t)}function rn(){var e=G.get(Ze),t=Ee(e),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.addEventListener(ze,$t),n.addEventListener(Te,Bt),n.addEventListener(Ue,Wt)}}catch(o){t.e(o)}finally{t.f()}window.addEventListener(st,ie);var a=Math.max.apply(Math,P(Array.from(e.keys()).map(function(o){return h.get(o).dropAnimationDurationMs}))),i=a===0?Qr:Math.max(a,Jr);pe=Gr(e,function(){return A}),Mr(_,e,i*1.07,pe)}function nn(){var e=G.get(Ze),t=Ee(e),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.removeEventListener(ze,$t),n.removeEventListener(Te,Bt),n.removeEventListener(Ue,Wt)}}catch(a){t.e(a)}finally{t.f()}window.removeEventListener(st,ie),pe&&(pe.destroy(),pe=void 0),Pr()}function je(e){return e.findIndex(function(t){return!!t[$e]})}function an(e){var t;return xe(xe({},e),{},(t={},re(t,$e,!0),re(t,T,Nt),t))}function $t(e){var t=h.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==p)){if(be=!1,r=r.filter(function(l){return l[T]!==Y[T]&&l[T]!==Nt}),p!==e.currentTarget){var a=h.get(p).items,i=a.filter(function(l){return!l[$e]});V(p,i,{trigger:C.DRAGGED_ENTERED_ANOTHER,id:N[T],source:x.POINTER})}var o=e.detail.indexObj.index;O=e.currentTarget,r.splice(o,0,Y),V(e.currentTarget,r,{trigger:C.DRAGGED_ENTERED,id:N[T],source:x.POINTER})}}function Bt(e){if(H){var t=h.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==p&&e.currentTarget!==O)){var a=P(r),i=je(a);i!==-1&&a.splice(i,1);var o=O;O=void 0;var l=e.detail,u=l.type,f=l.theOtherDz;if(u===Le.OUTSIDE_OF_ANY||u===Le.LEFT_FOR_ANOTHER&&f!==p&&h.get(f).dropFromOthersDisabled){be=!0,O=p;var s=o===p?a:P(h.get(p).items);s.splice(He,0,Y),V(p,s,{trigger:C.DRAGGED_LEFT_ALL,id:N[T],source:x.POINTER})}V(e.currentTarget,a,{trigger:C.DRAGGED_LEFT,id:N[T],source:x.POINTER})}}}function Wt(e){var t=h.get(e.currentTarget),r=t.items,n=t.dropFromOthersDisabled;if(!(n&&e.currentTarget!==p)){var a=P(r);be=!1;var i=e.detail.indexObj.index,o=je(a);o!==-1&&a.splice(o,1),a.splice(i,0,Y),V(e.currentTarget,a,{trigger:C.DRAGGED_OVER_INDEX,id:N[T],source:x.POINTER})}}function Fe(e){e.preventDefault();var t=e.touches?e.touches[0]:e;A={x:t.clientX,y:t.clientY},_.style.transform="translate3d(".concat(A.x-$.x,"px, ").concat(A.y-$.y,"px, 0)")}function ie(){ut=!0,window.removeEventListener("mousemove",Fe),window.removeEventListener("touchmove",Fe),window.removeEventListener("mouseup",ie),window.removeEventListener("touchend",ie),nn(),Hr(_),O||(O=p);var e=h.get(O),t=e.items,r=e.type;Pe(G.get(r),function(i){return h.get(i).dropTargetStyle},function(i){return h.get(i).dropTargetClasses});var n=je(t);n===-1&&O===p&&(n=He),t=t.map(function(i){return i[$e]?N:i});function a(){ct(),ne(O,t,{trigger:be?C.DROPPED_OUTSIDE_OF_ANY:C.DROPPED_INTO_ZONE,id:N[T],source:x.POINTER}),O!==p&&ne(p,h.get(p).items,{trigger:C.DROPPED_INTO_ANOTHER,id:N[T],source:x.POINTER});var i=Array.from(O.children).find(function(o){return o.getAttribute(Be)});i&&Kr(i),dn()}h.get(O).dropAnimationDisabled?a():on(n,a)}function on(e,t){var r=e>-1?et(O.children[e],!1):et(O,!1),n={x:r.left-parseFloat(_.style.left),y:r.top-parseFloat(_.style.top)},a=h.get(O),i=a.dropAnimationDurationMs,o="transform ".concat(i,"ms ease");_.style.transition=_.style.transition?_.style.transition+","+o:o,_.style.transform="translate3d(".concat(n.x,"px, ").concat(n.y,"px, 0)"),window.setTimeout(t,i)}function sn(e,t){Ne.push({dz:e,destroy:t}),window.requestAnimationFrame(function(){Ut(e),document.body.appendChild(e)})}function dn(){_&&_.remove&&_.remove(),R&&R.remove&&R.remove(),_=void 0,R=void 0,N=void 0,Ze=void 0,p=void 0,He=void 0,Y=void 0,O=void 0,$=void 0,A=void 0,H=!1,ut=!1,ct=void 0,be=!1,B&&clearTimeout(B),B=void 0,me=!1,Ne.length&&(Ne.forEach(function(e){var t=e.dz,r=e.destroy;r(),t.remove()}),Ne=[])}function ln(e,t){var r=!1,n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:bt,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1,dropAnimationDisabled:!1,delayTouchStartMs:0},a=new Map;function i(){window.addEventListener("mousemove",u,{passive:!1}),window.addEventListener("touchmove",u,{passive:!1,capture:!1}),window.addEventListener("mouseup",l,{passive:!1}),window.addEventListener("touchend",l,{passive:!1})}function o(){window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",u),window.removeEventListener("mouseup",l),window.removeEventListener("touchend",l),B&&(clearTimeout(B),B=void 0,me=!1)}function l(d){if(o(),R=void 0,$=void 0,A=void 0,d.type==="touchend"){var c=new Event("click",{bubbles:!0,cancelable:!0});d.target.dispatchEvent(c)}}function u(d){var c=!!d.touches,v=c?d.touches[0]:d;if(c&&n.delayTouchStartMs>0&&!me){A={x:v.clientX,y:v.clientY},(Math.abs(A.x-$.x)>=Se||Math.abs(A.y-$.y)>=Se)&&(B&&(clearTimeout(B),B=void 0),l(d));return}d.preventDefault(),A={x:v.clientX,y:v.clientY},(Math.abs(A.x-$.x)>=Se||Math.abs(A.y-$.y)>=Se)&&(o(),s())}function f(d){if(!(d.target!==d.currentTarget&&(d.target.value!==void 0||d.target.isContentEditable))&&!d.button&&!H){var c=!!d.touches,v=c&&n.delayTouchStartMs>0;v||d.preventDefault(),d.stopPropagation();var m=c?d.touches[0]:d;$={x:m.clientX,y:m.clientY},A=xe({},$),R=d.currentTarget,v&&(me=!1,B=window.setTimeout(function(){R&&(me=!0,o(),s())},n.delayTouchStartMs)),i()}}function s(){H=!0;var d=a.get(R);He=d,p=R.parentElement;var c=p.closest("dialog")||p.closest("[popover]")||p.getRootNode(),v=c.body||c,m=n.items,y=n.type,b=n.centreDraggedOnCursor,D=P(m);N=D[d],Ze=y,Y=an(N),_=Zr(R,b&&A),v.appendChild(_);function z(){R.parentElement?window.requestAnimationFrame(z):(R.setAttribute(_t,!0),v.appendChild(R),rn(),Ut(R),Y[T]=N[T],_.focus())}window.requestAnimationFrame(z),Re(Array.from(G.get(n.type)).filter(function(L){return L===p||!h.get(L).dropFromOthersDisabled}),function(L){return h.get(L).dropTargetStyle},function(L){return h.get(L).dropTargetClasses}),D.splice(d,1,Y),ct=Xr(p),V(p,D,{trigger:C.DRAG_STARTED,id:N[T],source:x.POINTER}),window.addEventListener("mousemove",Fe,{passive:!1}),window.addEventListener("touchmove",Fe,{passive:!1,capture:!1}),window.addEventListener("mouseup",ie,{passive:!1}),window.addEventListener("touchend",ie,{passive:!1})}function g(d){var c=d.items,v=c===void 0?void 0:c,m=d.flipDurationMs,y=m===void 0?0:m,b=d.type,D=b===void 0?qr:b,z=d.dragDisabled,L=z===void 0?!1:z,ae=d.morphDisabled,_e=ae===void 0?!1:ae,oe=d.dropFromOthersDisabled,se=oe===void 0?!1:oe,de=d.dropTargetStyle,le=de===void 0?bt:de,ue=d.dropTargetClasses,Z=ue===void 0?[]:ue,we=d.transformDraggedElement,ce=we===void 0?function(){}:we,Ye=d.centreDraggedOnCursor,Oe=Ye===void 0?!1:Ye,I=d.dropAnimationDisabled,Vt=I===void 0?!1:I,ft=d.delayTouchStart,fe=ft===void 0?!1:ft;n.dropAnimationDurationMs=y;var Ve=0;fe===!0?Ve=en:typeof fe=="number"&&isFinite(fe)&&fe>=0&&(Ve=fe),n.delayTouchStartMs=Ve,n.type&&D!==n.type&&wt(e,n.type),n.type=D,n.items=P(v),n.dragDisabled=L,n.morphDisabled=_e,n.transformDraggedElement=ce,n.centreDraggedOnCursor=Oe,n.dropAnimationDisabled=Vt,r&&H&&!ut&&(!Nr(le,n.dropTargetStyle)||!xr(Z,n.dropTargetClasses))&&(Pe([e],function(){return n.dropTargetStyle},function(){return Z}),Re([e],function(){return le},function(){return Z})),n.dropTargetStyle=le,n.dropTargetClasses=P(Z);function Ie(U,gt){return h.get(U)?h.get(U)[gt]:n[gt]}r&&H&&n.dropFromOthersDisabled!==se&&(se?Pe([e],function(U){return Ie(U,"dropTargetStyle")},function(U){return Ie(U,"dropTargetClasses")}):Re([e],function(U){return Ie(U,"dropTargetStyle")},function(U){return Ie(U,"dropTargetClasses")})),n.dropFromOthersDisabled=se,h.set(e,n),tn(e,D);for(var Kt=H?je(n.items):-1,J=0;J<e.children.length;J++){var F=e.children[J];if(Yr(F,L),J===Kt){_e||jr(_,F,A.x,A.y),n.transformDraggedElement(_,N,J),Vr(F);continue}F.removeEventListener("mousedown",qe.get(F)),F.removeEventListener("touchstart",qe.get(F)),L||(F.addEventListener("mousedown",f),F.addEventListener("touchstart",f),qe.set(F,f)),a.set(F,J),r||(r=!0)}}return g(t),{update:function(c){g(c)},destroy:function(){function c(){wt(e,h.get(e).type),h.delete(e)}H&&!e.closest("[".concat(_t,"]"))?sn(e,c):c()}}}var Ce,rt={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Zt=(Ce={},re(Ce,rt.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),re(Ce,rt.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),Ce),un="dnd-action-aria-alert",E;function nt(){E||(E=document.createElement("div"),function(){E.id=un,E.style.position="fixed",E.style.bottom="0",E.style.left="0",E.style.zIndex="-5",E.style.opacity="0",E.style.height="0",E.style.width="0",E.setAttribute("role","alert")}(),document.body.prepend(E),Object.entries(Zt).forEach(function(e){var t=ur(e,2),r=t[0],n=t[1];return document.body.prepend(gn(r,n))}))}function cn(){return dt?null:(document.readyState==="complete"?nt():window.addEventListener("DOMContentLoaded",nt),xe({},rt))}function fn(){dt||!E||(Object.keys(Zt).forEach(function(e){var t;return(t=document.getElementById(e))===null||t===void 0?void 0:t.remove()}),E.remove(),E=void 0)}function gn(e,t){var r=document.createElement("div");return r.id=e,r.innerHTML="<p>".concat(t,"</p>"),r.style.display="none",r.style.position="fixed",r.style.zIndex="-5",r}function te(e){if(!dt){E||nt(),E.innerHTML="";var t=document.createTextNode(e);E.appendChild(t),E.style.display="none",E.style.display="inline"}}var vn="--any--",Ot={outline:"rgba(255, 255, 102, 0.7) solid 2px"},M=!1,it,S,q="",X,W,j="",ke=new WeakSet,It=new WeakMap,At=new WeakMap,at=new Map,w=new Map,k=new Map,Ge;function mn(e,t){k.size===0&&(Ge=cn(),window.addEventListener("keydown",Ht),window.addEventListener("click",jt)),k.has(t)||k.set(t,new Set),k.get(t).has(e)||(k.get(t).add(e),xt())}function St(e,t){S===e&&De(),k.get(t).delete(e),Lt(),k.get(t).size===0&&k.delete(t),k.size===0&&(window.removeEventListener("keydown",Ht),window.removeEventListener("click",jt),Ge=void 0,fn())}function Ht(e){if(M)switch(e.key){case"Escape":{De();break}}}function jt(){M&&(ke.has(document.activeElement)||De())}function pn(e){if(M){var t=e.currentTarget;if(t!==S){q=t.getAttribute("aria-label")||"";var r=w.get(S),n=r.items,a=n.find(function(g){return g[T]===W}),i=n.indexOf(a),o=n.splice(i,1)[0],l=w.get(t),u=l.items,f=l.autoAriaDisabled;t.getBoundingClientRect().top<S.getBoundingClientRect().top||t.getBoundingClientRect().left<S.getBoundingClientRect().left?(u.push(o),f||te("Moved item ".concat(j," to the end of the list ").concat(q))):(u.unshift(o),f||te("Moved item ".concat(j," to the beginning of the list ").concat(q)));var s=S;ne(s,n,{trigger:C.DROPPED_INTO_ANOTHER,id:W,source:x.KEYBOARD}),ne(t,u,{trigger:C.DROPPED_INTO_ZONE,id:W,source:x.KEYBOARD}),S=t}}}function Yt(){at.forEach(function(e,t){var r=e.update;return r(w.get(t))})}function De(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;w.get(S).autoAriaDisabled||te("Stopped dragging item ".concat(j)),ke.has(document.activeElement)&&document.activeElement.blur(),e&&V(S,w.get(S).items,{trigger:C.DRAG_STOPPED,id:W,source:x.KEYBOARD}),Pe(k.get(it),function(t){return w.get(t).dropTargetStyle},function(t){return w.get(t).dropTargetClasses}),X=null,W=null,j="",it=null,S=null,q="",M=!1,Yt()}function hn(e,t){var r={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Ot,dropTargetClasses:[],autoAriaDisabled:!1};function n(s,g,d){s.length<=1||s.splice(d,1,s.splice(g,1,s[d])[0])}function a(s){switch(s.key){case"Enter":case" ":{if((s.target.disabled!==void 0||s.target.href||s.target.isContentEditable)&&!ke.has(s.target))return;s.preventDefault(),s.stopPropagation(),M?De():i(s);break}case"ArrowDown":case"ArrowRight":{if(!M)return;s.preventDefault(),s.stopPropagation();var g=w.get(e),d=g.items,c=Array.from(e.children),v=c.indexOf(s.currentTarget);v<c.length-1&&(r.autoAriaDisabled||te("Moved item ".concat(j," to position ").concat(v+2," in the list ").concat(q)),n(d,v,v+1),ne(e,d,{trigger:C.DROPPED_INTO_ZONE,id:W,source:x.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!M)return;s.preventDefault(),s.stopPropagation();var m=w.get(e),y=m.items,b=Array.from(e.children),D=b.indexOf(s.currentTarget);D>0&&(r.autoAriaDisabled||te("Moved item ".concat(j," to position ").concat(D," in the list ").concat(q)),n(y,D,D-1),ne(e,y,{trigger:C.DROPPED_INTO_ZONE,id:W,source:x.KEYBOARD}));break}}}function i(s){l(s.currentTarget),S=e,it=r.type,M=!0;var g=Array.from(k.get(r.type)).filter(function(c){return c===S||!w.get(c).dropFromOthersDisabled});if(Re(g,function(c){return w.get(c).dropTargetStyle},function(c){return w.get(c).dropTargetClasses}),!r.autoAriaDisabled){var d="Started dragging item ".concat(j,". Use the arrow keys to move it within its list ").concat(q);g.length>1&&(d+=", or tab to another list in order to move the item into it"),te(d)}V(e,w.get(e).items,{trigger:C.DRAG_STARTED,id:W,source:x.KEYBOARD}),Yt()}function o(s){M&&s.currentTarget!==X&&(s.stopPropagation(),De(!1),i(s))}function l(s){var g=w.get(e),d=g.items,c=Array.from(e.children),v=c.indexOf(s);X=s,X.tabIndex=r.zoneItemTabIndex,W=d[v][T],j=c[v].getAttribute("aria-label")||""}function u(s){var g=s.items,d=g===void 0?[]:g,c=s.type,v=c===void 0?vn:c,m=s.dragDisabled,y=m===void 0?!1:m,b=s.zoneTabIndex,D=b===void 0?0:b,z=s.zoneItemTabIndex,L=z===void 0?0:z,ae=s.dropFromOthersDisabled,_e=ae===void 0?!1:ae,oe=s.dropTargetStyle,se=oe===void 0?Ot:oe,de=s.dropTargetClasses,le=de===void 0?[]:de,ue=s.autoAriaDisabled,Z=ue===void 0?!1:ue;r.items=P(d),r.dragDisabled=y,r.dropFromOthersDisabled=_e,r.zoneTabIndex=D,r.zoneItemTabIndex=L,r.dropTargetStyle=se,r.dropTargetClasses=le,r.autoAriaDisabled=Z,r.type&&v!==r.type&&St(e,r.type),r.type=v,mn(e,v),Z||(e.setAttribute("role","list"),e.setAttribute("aria-describedby",y?Ge.DND_ZONE_DRAG_DISABLED:Ge.DND_ZONE_ACTIVE)),w.set(e,r),M?e.tabIndex=e===S||X.contains(e)||r.dropFromOthersDisabled||S&&r.type!==w.get(S).type?-1:0:e.tabIndex=r.zoneTabIndex,e.addEventListener("focus",pn);for(var we=function(Oe){var I=e.children[Oe];ke.add(I),I.tabIndex=M?-1:r.zoneItemTabIndex,Z||I.setAttribute("role","listitem"),I.removeEventListener("keydown",It.get(I)),I.removeEventListener("click",At.get(I)),y||(I.addEventListener("keydown",a),It.set(I,a),I.addEventListener("click",o),At.set(I,o)),M&&r.items[Oe][T]===W&&(X=I,X.tabIndex=r.zoneItemTabIndex,I.focus())},ce=0;ce<e.children.length;ce++)we(ce)}u(t);var f={update:function(g){u(g)},destroy:function(){St(e,r.type),w.delete(e),at.delete(e)}};return at.set(e,f),f}var yn=["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","zoneItemTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor","delayTouchStart","dropAnimationDisabled"];function Cn(e,t){if(Dn(e))return{update:function(){},destroy:function(){}};Ct(t);var r=ln(e,t),n=hn(e,t);return{update:function(i){Ct(i),r.update(i),n.update(i)},destroy:function(){r.destroy(),n.destroy()}}}function Dn(e){return!!e.closest("[".concat(wr,'="true"]'))}function Ct(e){var t=e.items;e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled;var r=e.zoneTabIndex,n=e.zoneItemTabIndex;e.dropTargetStyle;var a=e.dropTargetClasses;e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor;var i=e.delayTouchStart;e.dropAnimationDisabled;var o=lr(e,yn);if(Object.keys(o).length>0&&console.warn("dndzone will ignore unknown options",o),!t)throw new Error("no 'items' key provided to dndzone");var l=t.find(function(s){return!{}.hasOwnProperty.call(s,T)});if(l)throw new Error("missing '".concat(T,"' property for item ").concat(ge(l)));if(a&&!Array.isArray(a))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(Q(a),", ").concat(ge(a)));if(r&&!Rt(r))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(Q(r),", ").concat(ge(r)));if(n&&!Rt(n))throw new Error("zoneItemTabIndex should be a number but instead it is a ".concat(Q(n),", ").concat(ge(n)));if(i!==void 0&&i!==!1){var u=i===!0,f=typeof i=="number"&&isFinite(i)&&i>=0;if(!u&&!f)throw new Error("delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a ".concat(Q(i),", ").concat(ge(i)))}}function Rt(e){return!isNaN(e)&&function(t){return(t|0)===t}(parseFloat(e))}export{Sn as I,_n as c,Cn as d,An as e,In as g,wn as i,or as o,On as p,ar as t};
